<template> 
    
<div>
    <div class="arrows">
    <button class="btn btn-outline-dark btn-lg" v-on:click="switchFloor('back')"><img src="@/assets/arrowLeft.png" 
          style="vertical-align: middle; width: 30px"></button>
      <button type="button" id="here-btn" class="btn btn-outline-dark btn-lg" v-on:click="showHome">Домой </button>
    <button class="btn btn-outline-dark btn-lg" v-on:click="switchFloor('forward')"><img src="@/assets/arrowRight.png" 
          style="vertical-align: middle; width: 30px"></button>  
    </div>
    <div class="svfgloors">
  <svg  viewBox="0 0 1602.0731 1490" v-if="showSelect==='0' " transform="scale(1.3 1.3)" > <Floor0 />
       
        <g v-if="slicedRoute.find(x => x.floor === '0')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '0').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['0']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='0')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='0'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 2336 1651"  v-if="showSelect==='1'" transform="scale(1.5 1.5)" ><Floor1 />
 
        <g v-if="slicedRoute.find(x => x.floor === '1')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '1').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['1']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='1')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='1'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
        

  </svg>
  <svg viewBox="0 0 1966 635"  v-if="showSelect==='2'"  ><Floor2 />
       
        <g v-if="slicedRoute.find(x => x.floor === '2')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '2').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['2']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='2')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='2'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>

  </svg>
  <svg  viewBox="0 0 582.99988 563.92383" v-if="showSelect==='2a'"  ><Floor2a />
        
        <g v-if="slicedRoute.find(x => x.floor === '2a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '2a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['2a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='2a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='2a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg  viewBox="0 0 1966 635" v-if="showSelect==='3'"  ><Floor3 />
      
       

        <g v-if="slicedRoute.find(x => x.floor === '3')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '3').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['3']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='3')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='3'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='3a'"  ><Floor3a />
       
        <g v-if="slicedRoute.find(x => x.floor === '3a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '3a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['3a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='3a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='3a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 1966 635"  v-if="showSelect==='4'"  ><Floor4 />
      
        <g v-if="slicedRoute.find(x => x.floor === '4')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '4').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['4']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='4')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='4'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='4a'"  ><Floor4a />
       
       
      <g v-if="slicedRoute.find(x => x.floor === '4a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '4a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['4a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='4a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='4a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>

  </svg>
  <svg viewBox="0 0 1966 635"  v-if="showSelect==='5'"  ><Floor5 />
       
        <g v-if="slicedRoute.find(x => x.floor === '5')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '5').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['5']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='5')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='5'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='5a'"  ><Floor5a />
       
        <g v-if="slicedRoute.find(x => x.floor === '5a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '5a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['5a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='5a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='5a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 1966 635"  v-if="showSelect==='6'"  ><Floor6 />
      
        <g v-if="slicedRoute.find(x => x.floor === '6')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '6').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['6']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='6')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='6'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='6a'"  ><Floor6a />
       
        <g v-if="slicedRoute.find(x => x.floor === '6a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '6a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['6a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='6a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='6a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='7a'"  ><Floor7a />
        
        <g v-if="slicedRoute.find(x => x.floor === '7a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '7a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['7a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='7a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='7a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='8a'"  ><Floor8a />
      
        <g v-if="slicedRoute.find(x => x.floor === '8a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '8a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['8a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='8a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='8a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  <svg viewBox="0 0 582.99988 563.92383"  v-if="showSelect==='9a'"  ><Floor9a />
       
        <g v-if="slicedRoute.find(x => x.floor === '9a')">
      <circle  v-for="dot in slicedRoute.find(x => x.floor === '9a').dots" v-bind:key=dot.id :id='dot.id' :cx='dot.cx' :cy='dot.cy' r="10" fill="pink" />
      </g>
       <g v-for="room in studyRooms['9a']" v-bind:key=room.id class="room" @click="destDot=room.id" v-bind:class="{selected:room.selected}" > 
        <path class="study" :d="room.path"/>
        <text  class="cab-num"  xml:space="preserve" :transform='rotate(room.rotate)'> <tspan :y='room.yTextPos' :x='room.xTextPos'>{{room.label}}</tspan> </text>
        </g> 
        <g v-if="(getFloorByCab(homeDot)==='9a')" :transform="homePoitChord(homeDot)" class="homePointer"><Here /> </g>
        <g v-if="getFloorByCab(destDot)==='9a'" :transform ="roomClicked(destDot)">
            <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="85.7143" rx="10" fill="#C4C4C4"/>
            
            
            <rect class="marker" @click="makeRoute(destDot)" x="11.5759" y="17.3776" width="126.5" height="52.7975" rx="9.5" stroke="#505050"/>
            <path d="M76.0014 150V150C76.0014 115.069 103.921 86.5431 138.844 85.7928L142.5 85.7143H7.5L13.2386 85.8406C48.1227 86.6084 76.0014 115.107 76.0014 150V150Z" fill="#C4C4C4"/>
            <!-- Bind класса переворота надписи на указателе, если в transform есть scale (определяется по длине параметра transform) -->
            <path v-bind:class="{textflip:roomClicked(destDot).length>25}" d="M38.4375 40H36.9297V29.8594H31.3203V40H29.8203V28.625H38.4375V40ZM49.9219 34.6797C49.9219 35.7943 49.7344 36.7682 49.3594 37.6016C48.9844 38.4297 48.4531 39.0625 47.7656 39.5C47.0781 39.9375 46.276 40.1562 45.3594 40.1562C44.4635 40.1562 43.6693 39.9375 42.9766 39.5C42.2839 39.0573 41.7448 38.4297 41.3594 37.6172C40.9792 36.7995 40.7839 35.8542 40.7734 34.7812V33.9609C40.7734 32.8672 40.9635 31.901 41.3438 31.0625C41.724 30.224 42.2604 29.5833 42.9531 29.1406C43.651 28.6927 44.4479 28.4688 45.3438 28.4688C46.2552 28.4688 47.0573 28.6901 47.75 29.1328C48.4479 29.5703 48.9844 30.2083 49.3594 31.0469C49.7344 31.8802 49.9219 32.8516 49.9219 33.9609V34.6797ZM48.4297 33.9453C48.4297 32.5964 48.1589 31.5625 47.6172 30.8438C47.0755 30.1198 46.3177 29.7578 45.3438 29.7578C44.3958 29.7578 43.6484 30.1198 43.1016 30.8438C42.5599 31.5625 42.2812 32.5625 42.2656 33.8438V34.6797C42.2656 35.987 42.5391 37.0156 43.0859 37.7656C43.638 38.5104 44.3958 38.8828 45.3594 38.8828C46.3281 38.8828 47.0781 38.5312 47.6094 37.8281C48.1406 37.1198 48.4141 36.1068 48.4297 34.7891V33.9453ZM60.5391 36.3906C60.3984 37.5938 59.9531 38.5234 59.2031 39.1797C58.4583 39.8307 57.4661 40.1562 56.2266 40.1562C54.8828 40.1562 53.8047 39.6745 52.9922 38.7109C52.1849 37.7474 51.7812 36.4583 51.7812 34.8438V33.75C51.7812 32.6927 51.9688 31.763 52.3438 30.9609C52.724 30.1589 53.2604 29.5443 53.9531 29.1172C54.6458 28.6849 55.4479 28.4688 56.3594 28.4688C57.5677 28.4688 58.5365 28.8073 59.2656 29.4844C59.9948 30.1562 60.4193 31.0885 60.5391 32.2812H59.0312C58.901 31.375 58.6172 30.7188 58.1797 30.3125C57.7474 29.9062 57.1406 29.7031 56.3594 29.7031C55.401 29.7031 54.6484 30.0573 54.1016 30.7656C53.5599 31.474 53.2891 32.4818 53.2891 33.7891V34.8906C53.2891 36.125 53.5469 37.1068 54.0625 37.8359C54.5781 38.5651 55.2995 38.9297 56.2266 38.9297C57.0599 38.9297 57.6979 38.7422 58.1406 38.3672C58.5885 37.987 58.8854 37.3281 59.0312 36.3906H60.5391ZM70.2188 29.8594H66.5625V40H65.0703V29.8594H61.4219V28.625H70.2188V29.8594ZM73.4062 35.5469V40H71.9062V28.625H76.1016C77.3464 28.625 78.3203 28.9427 79.0234 29.5781C79.7318 30.2135 80.0859 31.0547 80.0859 32.1016C80.0859 33.2057 79.7396 34.0573 79.0469 34.6562C78.3594 35.25 77.3724 35.5469 76.0859 35.5469H73.4062ZM73.4062 34.3203H76.1016C76.9036 34.3203 77.5182 34.1328 77.9453 33.7578C78.3724 33.3776 78.5859 32.8307 78.5859 32.1172C78.5859 31.4401 78.3724 30.8984 77.9453 30.4922C77.5182 30.0859 76.9323 29.875 76.1875 29.8594H73.4062V34.3203ZM90.75 34.6797C90.75 35.7943 90.5625 36.7682 90.1875 37.6016C89.8125 38.4297 89.2812 39.0625 88.5938 39.5C87.9062 39.9375 87.1042 40.1562 86.1875 40.1562C85.2917 40.1562 84.4974 39.9375 83.8047 39.5C83.112 39.0573 82.5729 38.4297 82.1875 37.6172C81.8073 36.7995 81.612 35.8542 81.6016 34.7812V33.9609C81.6016 32.8672 81.7917 31.901 82.1719 31.0625C82.5521 30.224 83.0885 29.5833 83.7812 29.1406C84.4792 28.6927 85.276 28.4688 86.1719 28.4688C87.0833 28.4688 87.8854 28.6901 88.5781 29.1328C89.276 29.5703 89.8125 30.2083 90.1875 31.0469C90.5625 31.8802 90.75 32.8516 90.75 33.9609V34.6797ZM89.2578 33.9453C89.2578 32.5964 88.987 31.5625 88.4453 30.8438C87.9036 30.1198 87.1458 29.7578 86.1719 29.7578C85.224 29.7578 84.4766 30.1198 83.9297 30.8438C83.388 31.5625 83.1094 32.5625 83.0938 33.8438V34.6797C83.0938 35.987 83.3672 37.0156 83.9141 37.7656C84.4661 38.5104 85.224 38.8828 86.1875 38.8828C87.1562 38.8828 87.9062 38.5312 88.4375 37.8281C88.9688 37.1198 89.2422 36.1068 89.2578 34.7891V33.9453ZM100.172 28.625H101.672V40H100.172V31.2344L94.5703 40H93.0625V28.625H94.5703V37.3906L100.172 28.625ZM112.031 29.8594H108.375V40H106.883V29.8594H103.234V28.625H112.031V29.8594ZM115.297 33.2656H118.125C119.312 33.2812 120.24 33.5859 120.906 34.1797C121.573 34.7734 121.906 35.5807 121.906 36.6016C121.906 37.6276 121.57 38.4453 120.898 39.0547C120.227 39.6641 119.31 39.9792 118.148 40H113.797V28.625H115.297V33.2656ZM115.297 34.5V38.7734H118.039C118.784 38.7734 119.362 38.5755 119.773 38.1797C120.19 37.7839 120.398 37.2526 120.398 36.5859C120.398 35.9453 120.198 35.4401 119.797 35.0703C119.401 34.7005 118.836 34.5104 118.102 34.5H115.297ZM38.9844 47.625L42.7031 56.9062L46.4219 47.625H48.3672V59H46.8672V54.5703L47.0078 49.7891L43.2734 59H42.125L38.3984 49.8125L38.5469 54.5703V59H37.0469V47.625H38.9844ZM57.4375 56.0312H52.6719L51.6016 59H50.0547L54.3984 47.625H55.7109L60.0625 59H58.5234L57.4375 56.0312ZM53.125 54.7969H56.9922L55.0547 49.4766L53.125 54.7969ZM63.0938 54.5469V59H61.5938V47.625H65.7891C67.0339 47.625 68.0078 47.9427 68.7109 48.5781C69.4193 49.2135 69.7734 50.0547 69.7734 51.1016C69.7734 52.2057 69.4271 53.0573 68.7344 53.6562C68.0469 54.25 67.0599 54.5469 65.7734 54.5469H63.0938ZM63.0938 53.3203H65.7891C66.5911 53.3203 67.2057 53.1328 67.6328 52.7578C68.0599 52.3776 68.2734 51.8307 68.2734 51.1172C68.2734 50.4401 68.0599 49.8984 67.6328 49.4922C67.2057 49.0859 66.6198 48.875 65.875 48.8594H63.0938V53.3203ZM73.25 47.625V57.7734H77.1641V47.625H78.6562V57.7734H82.5469V47.625H84.0469V59H71.7422V47.625H73.25ZM88.25 54.5469V59H86.75V47.625H90.9453C92.1901 47.625 93.1641 47.9427 93.8672 48.5781C94.5755 49.2135 94.9297 50.0547 94.9297 51.1016C94.9297 52.2057 94.5833 53.0573 93.8906 53.6562C93.2031 54.25 92.2161 54.5469 90.9297 54.5469H88.25ZM88.25 53.3203H90.9453C91.7474 53.3203 92.362 53.1328 92.7891 52.7578C93.2161 52.3776 93.4297 51.8307 93.4297 51.1172C93.4297 50.4401 93.2161 49.8984 92.7891 49.4922C92.362 49.0859 91.776 48.875 91.0312 48.8594H88.25V53.3203ZM100.75 54.2266L103.367 47.625H105.109L101.086 57.1016C100.815 57.7057 100.562 58.1354 100.328 58.3906C100.094 58.6406 99.8177 58.8333 99.5 58.9688C99.1875 59.099 98.7943 59.1641 98.3203 59.1641C97.9089 59.1641 97.6458 59.1406 97.5312 59.0938L97.5781 57.9062L98.2891 57.9375C98.8359 57.9375 99.2422 57.6745 99.5078 57.1484L99.7031 56.7422L100 56.0469L96.125 47.625H97.8047L100.75 54.2266ZM114.906 48.8594H111.25V59H109.758V48.8594H106.109V47.625H114.906V48.8594Z" fill="black"/>
            
            </svg>
      </g>
  </svg>
  </div>
</div>

</template>
<script>
import path from "@/mixins/pathfinder.js"

import studyRooms from "@/assets/floors.json"
import dots from "@/assets/dots.json"

import Floor0 from '@/assets/floors/floor0.svg?inline'
import Floor1 from '@/assets/floors/floor1.svg?inline'
import Floor2 from '@/assets/floors/floor2.svg?inline'
import Floor2a from '@/assets/floors/floor2a.svg?inline'
import Floor3 from '@/assets/floors/floor3.svg?inline'
import Floor3a from '@/assets/floors/floor3a.svg?inline'
import Floor4 from '@/assets/floors/floor4.svg?inline'
import Floor4a from '@/assets/floors/floor4a.svg?inline'
import Floor5 from '@/assets/floors/floor5.svg?inline'
import Floor5a from '@/assets/floors/floor5a.svg?inline'
import Floor6 from '@/assets/floors/floor6.svg?inline'
import Floor6a from '@/assets/floors/floor6a.svg?inline'
import Floor7a from '@/assets/floors/floor7a.svg?inline'
import Floor8a from '@/assets/floors/floor8a.svg?inline'
import Floor9a from '@/assets/floors/floor9a.svg?inline'
import Here from '@/assets/floors/here.svg?inline'

export default {
  mixins: [path],
  props : {
        homeDot: {
              type: String,
              required: true
        },
        destDot:{
            //   type: String
        },
        showSelect:{
              type: String,
              required: true
        }
  },
  components : {Here, Floor0, Floor1, Floor2, Floor2a, Floor3, Floor3a, Floor4, Floor4a, Floor5, Floor5a, Floor6, Floor6a, Floor7a, Floor8a, Floor9a},
  data() {
     return    {
       dots: dots,
       studyRooms: studyRooms,
       currentRoute : [],
       slicedRoute: [],
       floorCount: 0
  }

  },
  methods: {
        showHome: function () {
              this.showSelect= this.getFloorByCab(this.homeDot)
        },
        switchFloor: function (direction) {
            if(direction==='forward') {
            if(this.floorCount < this.slicedRoute.length-1){
                  this.floorCount++
                  this.showSelect= this.slicedRoute[this.floorCount].floor

            }

            }else{
                  if(this.floorCount > 0){
                        this.floorCount--
                   this.showSelect= this.slicedRoute[this.floorCount].floor 
                  }
            
            }
        },
        rotate: function (flag) {
            if (flag) 
            return "rotate(90)"
            else return "rotate(0)"
        },
        roomClicked: function (value) {
            
            // this.studyRooms[this.showSelect].find(x => x.id === value).selected = !this.studyRooms[this.showSelect].find(x => x.id === value).selected;
            const xTextPosValue = parseFloat(this.studyRooms[this.showSelect].find(x => x.id === value).xTextPos)
            const yTextPosValue = parseFloat(this.studyRooms[this.showSelect].find(x => x.id === value).yTextPos)
            const rotateValue = this.studyRooms[this.showSelect].find(x => x.id === value).rotate
            let result = {
                  x: 0,
                  y: 0,
                  flip: false
            }
            if (rotateValue){ // if text vertical
                  if(xTextPosValue-150 < 0){ // flip pointer
                        result.x = - yTextPosValue - 60;
                        result.y = xTextPosValue + 210;
                        result.flip = true;
                  } else{ // non-flip pointer
                        result.x = - yTextPosValue - 60;
                        result.y = xTextPosValue - 150;
                  }

            }else{  // if text horizontal
                  if(yTextPosValue-135 <0){ //flip pointer
                        result.x = xTextPosValue - 40;
                        result.y = yTextPosValue + 150;
                        result.flip = true;
                  } else { // non-flip pointer
                        result.x = xTextPosValue - 40;
                        result.y = yTextPosValue - 175;
                  }
            }
            console.log(result)
            if (!result.flip){
                  return (`translate (${Math.round(result.x)} ${Math.round(result.y)})`)
            }else{
                  return (`translate (${Math.round(result.x)} ${Math.round(result.y)}) scale (1 -1)`)
            }
        },
        homePoitChord: function(dot){
              
               return (`translate (${this.dots.find(x => x.id === dot).cx-20} ${this.dots.find(x => x.id === dot).cy-55})`)
        },
        getFloorByCab: function (room) {
                  if (room && room != -1){
                    
                  if(room.length === 7){
                        
                        return room.slice(3, 5)}
                    else{

                     
                     return room.slice(3, 4)     
                    }
              }
        },
        makeRoute: function (room) {
            
            
            this.currentRoute = this.findRoute(this.homeDot, room)
            
            this.slicedRoute =  this.routeSlicer(this.currentRoute)
            // this.floorCount = this.slicedRoute.length 
            this.destDot = ''
            this.showSelect= this.getFloorByCab(this.homeDot)
            
        },
        routeSlicer: function (route) {
              let floorsToShow = []
              route.forEach(dot => {
                    if(dot.slice(0,3)==='dot'){
                          let floor = dot.slice(3).split('-',1)[0]
                          if(floorsToShow.find(x => x.floor === floor)){
                                floorsToShow.find(x => x.floor === floor).dots.push(this.dots.find(x => x.id === dot))
                          }else {
                                let result = {
                                      floor : floor,
                                      dots : []
                                }
                                result.dots.push(this.dots.find(x => x.id === dot))
                                floorsToShow.push(result)
                          }
                    }
              });
            return floorsToShow
        }
        
        

  },
  computed: {
        
      
  
}
}
</script>
<style scoped>
.homePointer {
      opacity: 1;
}
.selected {
    opacity: 1;
}
.textflip {
      transform: scaleY(-1) translate(0px, -85px);
}
.marker{
  fill: #c4c4c4;
  opacity: .9;
}

.marker:hover{
  opacity: 1;
}
.arrows {
      display: flex;
      justify-content: center;
     
}
.btn btn-outline-dark btn-lg {
     margin:  1rem;
}
</style>